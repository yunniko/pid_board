{% extends "base.html.twig" %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/board.js') }}"></script>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('css/board.css') }}" rel="stylesheet"/>
{% endblock %}

{% block content %}
    <div class="current-time-container">
        <div class="current-time">{{ now|date('H:i:s') }}</div>
    </div>


    <div class="timetable">
        {% for timetable in departures %}
            <div class='timetable-panel'>
                <div class='timetable-name'>{{ timetable.stop }}</div>
                <div class='timetable-content'>
                    {% for transport in timetable.departures %}
                        {% set item_class = false %}
                        {% if (transport.departure_predicted_ts < now) %}
                            {% set item_class = 'past' %}
                        {% elseif not item_class or item_class == 'past' %}
                            {% set item_class = 'current' %}
                        {% else %}
                            {% set item_class = 'future' %}
                        {% endif %}
                        <div class='timetable-item {{ item_class }}'>
                            <div>
                                {{ transport.departure_predicted_diff }}
                            </div>
                            <div>
                                <b>{{ transport.departure_predicted_short }}</b>
                            </div>
                            <div>
                                {% if transport.departure_scheduled_short != transport.departure_predicted_short %}
                                    <span class="scheduled">({{ transport.departure_scheduled_short }})</span>
                                {% endif %}
                            </div>
                            <div>
                                <b>{{ transport.route_number }}</b>
                            </div>
                            <div>
                                {{ transport.destination }}
                            </div>
                            <div>
                                {% if transport.train_number %}
                                    ({{ transport.train_number }})
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}